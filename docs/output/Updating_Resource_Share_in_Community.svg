<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="722px" preserveAspectRatio="none" style="width:2396px;height:722px;background:#FFFFFF;" version="1.1" viewBox="0 0 2396 722" width="2396px" zoomAndPan="magnify"><defs/><g><g><title>ResourceController</title><rect fill="#FFFFFF" height="483.6133" style="stroke:#181818;stroke-width:1;" width="10" x="515.7617" y="148.1094"/></g><g><title>ResourceService</title><rect fill="#FFFFFF" height="418.9922" style="stroke:#181818;stroke-width:1;" width="10" x="911.3643" y="212.7305"/></g><g><title>MessageBroker</title><rect fill="#FFFFFF" height="154.5527" style="stroke:#181818;stroke-width:1;" width="10" x="1466.896" y="300.6621"/></g><g><title>ApplicationShareListener</title><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1;" width="10" x="1881.6938" y="329.9727"/></g><g><title>Database</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="2356.2656" y="242.041"/></g><rect fill="none" height="208.1289" style="stroke:#000000;stroke-width:1.5;" width="1521.1382" x="19" y="416.5938"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="560.2344" width="8" x="43.1826" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="47" x2="47" y1="81.4883" y2="641.7227"/></g><g><title>ResourceController</title><rect fill="#000000" fill-opacity="0.00000" height="560.2344" width="8" x="516.7617" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="519.793" x2="519.793" y1="81.4883" y2="641.7227"/></g><g><title>ResourceService</title><rect fill="#000000" fill-opacity="0.00000" height="560.2344" width="8" x="912.3643" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="915.8101" x2="915.8101" y1="81.4883" y2="641.7227"/></g><g><title>MessageBroker</title><rect fill="#000000" fill-opacity="0.00000" height="560.2344" width="8" x="1467.896" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1471.6538" x2="1471.6538" y1="81.4883" y2="641.7227"/></g><g><title>ApplicationShareListener</title><rect fill="#000000" fill-opacity="0.00000" height="560.2344" width="8" x="1882.6938" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1886.5742" x2="1886.5742" y1="81.4883" y2="641.7227"/></g><g><title>Database</title><rect fill="#000000" fill-opacity="0.00000" height="560.2344" width="8" x="2357.2656" y="81.4883"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="2360.9331" x2="2360.9331" y1="81.4883" y2="641.7227"/></g><g class="participant participant-head" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="29" y="78.5352">User</text><ellipse cx="47.1826" cy="13.5" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M47.1826,21.5 L47.1826,48.5 M34.1826,29.5 L60.1826,29.5 M47.1826,48.5 L34.1826,63.5 M47.1826,48.5 L60.1826,63.5" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="user"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="30.3652" x="29" y="654.2578">User</text><ellipse cx="47.1826" cy="665.7109" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M47.1826,673.7109 L47.1826,700.7109 M34.1826,681.7109 L60.1826,681.7109 M47.1826,700.7109 L34.1826,715.7109 M47.1826,700.7109 L60.1826,715.7109" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="controller"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.9375" x="448.793" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.9375" x="455.793" y="70.5352">ResourceController</text></g><g class="participant participant-tail" data-participant="controller"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="143.9375" x="448.793" y="640.7227"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="129.9375" x="455.793" y="661.2578">ResourceController</text></g><g class="participant participant-head" data-participant="service"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.1084" x="854.8101" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1084" x="861.8101" y="70.5352">ResourceService</text></g><g class="participant participant-tail" data-participant="service"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="123.1084" x="854.8101" y="640.7227"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="109.1084" x="861.8101" y="661.2578">ResourceService</text></g><g class="participant participant-head" data-participant="broker"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.4844" x="1413.6538" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.4844" x="1420.6538" y="70.5352">MessageBroker</text></g><g class="participant participant-tail" data-participant="broker"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="116.4844" x="1413.6538" y="640.7227"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.4844" x="1420.6538" y="661.2578">MessageBroker</text></g><g class="participant participant-head" data-participant="appListener"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182.2393" x="1795.5742" y="50"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168.2393" x="1802.5742" y="70.5352">ApplicationShareListener</text></g><g class="participant participant-tail" data-participant="appListener"><rect fill="#E2E2F0" height="30.4883" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="182.2393" x="1795.5742" y="640.7227"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168.2393" x="1802.5742" y="661.2578">ApplicationShareListener</text></g><g class="participant participant-head" data-participant="db"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.665" x="2326.9331" y="78.5352">Database</text><path d="M2343.2656,29 C2343.2656,19 2361.2656,19 2361.2656,19 C2361.2656,19 2379.2656,19 2379.2656,29 L2379.2656,55 C2379.2656,65 2361.2656,65 2361.2656,65 C2361.2656,65 2343.2656,65 2343.2656,55 L2343.2656,29" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M2343.2656,29 C2343.2656,39 2361.2656,39 2361.2656,39 C2361.2656,39 2379.2656,39 2379.2656,29" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="db"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="62.665" x="2326.9331" y="654.2578">Database</text><path d="M2343.2656,667.2109 C2343.2656,657.2109 2361.2656,657.2109 2361.2656,657.2109 C2361.2656,657.2109 2379.2656,657.2109 2379.2656,667.2109 L2379.2656,693.2109 C2379.2656,703.2109 2361.2656,703.2109 2361.2656,703.2109 C2361.2656,703.2109 2343.2656,703.2109 2343.2656,693.2109 L2343.2656,667.2109" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M2343.2656,667.2109 C2343.2656,677.2109 2361.2656,677.2109 2361.2656,677.2109 C2361.2656,677.2109 2379.2656,677.2109 2379.2656,667.2109" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g><title>ResourceController</title><rect fill="#FFFFFF" height="483.6133" style="stroke:#181818;stroke-width:1;" width="10" x="515.7617" y="148.1094"/></g><g><title>ResourceService</title><rect fill="#FFFFFF" height="418.9922" style="stroke:#181818;stroke-width:1;" width="10" x="911.3643" y="212.7305"/></g><g><title>MessageBroker</title><rect fill="#FFFFFF" height="154.5527" style="stroke:#181818;stroke-width:1;" width="10" x="1466.896" y="300.6621"/></g><g><title>ApplicationShareListener</title><rect fill="#FFFFFF" height="71.6211" style="stroke:#181818;stroke-width:1;" width="10" x="1881.6938" y="329.9727"/></g><g><title>Database</title><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1;" width="10" x="2356.2656" y="242.041"/></g><path d="M5,96.4883 L5,121.4883 L563,121.4883 L563,106.4883 L553,96.4883 L5,96.4883" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M553,96.4883 L553,106.4883 L563,106.4883 L553,96.4883" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="405.4185" x="77.156" y="114.0566">User updates resource share permissions (reader to contributor)</text><g class="message" data-participant-1="user" data-participant-2="controller"><polygon fill="#181818" points="503.7617,144.1094,513.7617,148.1094,503.7617,152.1094,507.7617,148.1094" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="47.1826" x2="509.7617" y1="148.1094" y2="148.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="449.5791" x="54.1826" y="143.3672">PATCH /api/communities/{communityId}/resources/{resourceId}/share</text></g><path d="M52,161.1094 L52,186.1094 L243,186.1094 L243,171.1094 L233,161.1094 L52,161.1094" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M233,161.1094 L233,171.1094 L243,171.1094 L233,161.1094" fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170.5615" x="58" y="178.6777">{ shareType: "contributor" }</text><g class="message" data-participant-1="controller" data-participant-2="service"><polygon fill="#181818" points="899.3643,208.7305,909.3643,212.7305,899.3643,216.7305,903.3643,212.7305" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="525.7617" x2="905.3643" y1="212.7305" y2="212.7305"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="366.6025" x="532.7617" y="207.9883">updateResourceShare(communityId, resourceId, shareDto)</text></g><g class="message" data-participant-1="service" data-participant-2="db"><polygon fill="#181818" points="2344.2656,238.041,2354.2656,242.041,2344.2656,246.041,2348.2656,242.041" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="921.3643" x2="2350.2656" y1="242.041" y2="242.041"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="308.6104" x="928.3643" y="237.2988">validateResourceExists(resourceId, communityId)</text></g><g class="message" data-participant-1="db" data-participant-2="service"><polygon fill="#181818" points="932.3643,267.3516,922.3643,271.3516,932.3643,275.3516,928.3643,271.3516" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="926.3643" x2="2360.2656" y1="271.3516" y2="271.3516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.041" x="938.3643" y="266.6094">resourceInfo</text></g><g class="message" data-participant-1="service" data-participant-2="broker"><polygon fill="#181818" points="1454.896,296.6621,1464.896,300.6621,1454.896,304.6621,1458.896,300.6621" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="921.3643" x2="1460.896" y1="300.6621" y2="300.6621"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="526.5317" x="928.3643" y="295.9199">updateCommunitySharePermission(communityId, resourceId, shareType, appName)</text></g><g class="message" data-participant-1="broker" data-participant-2="appListener"><polygon fill="#181818" points="1869.6938,325.9727,1879.6938,329.9727,1869.6938,333.9727,1873.6938,329.9727" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1476.896" x2="1875.6938" y1="329.9727" y2="329.9727"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="385.7979" x="1483.896" y="325.2305">updateSharePermission(resourceId, communityId, shareType)</text></g><g class="message" data-participant-1="appListener" data-participant-2="appListener"><line style="stroke:#181818;stroke-width:1;" x1="1891.6938" x2="1933.6938" y1="359.2832" y2="359.2832"/><line style="stroke:#181818;stroke-width:1;" x1="1933.6938" x2="1933.6938" y1="359.2832" y2="372.2832"/><line style="stroke:#181818;stroke-width:1;" x1="1892.6938" x2="1933.6938" y1="372.2832" y2="372.2832"/><polygon fill="#181818" points="1902.6938,368.2832,1892.6938,372.2832,1902.6938,376.2832,1898.6938,372.2832" style="stroke:#181818;stroke-width:1;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="440.5718" x="1898.6938" y="354.541">modifyGroupSharePermission(resourceId, communityId, "contributor")</text></g><g class="message" data-participant-1="appListener" data-participant-2="broker"><polygon fill="#181818" points="1487.896,397.5938,1477.896,401.5938,1487.896,405.5938,1483.896,401.5938" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="1481.896" x2="1885.6938" y1="401.5938" y2="401.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.9858" x="1493.896" y="396.8516">shareUpdateConfirmation</text></g><path d="M19,416.5938 L81.1387,416.5938 L81.1387,423.9043 L71.1387,433.9043 L19,433.9043 L19,416.5938" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="208.1289" style="stroke:#000000;stroke-width:1.5;" width="1521.1382" x="19" y="416.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="34" y="430.1621">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177.2192" x="96.1387" y="429.2285">[successful permission update]</text><g class="message" data-participant-1="broker" data-participant-2="service"><polygon fill="#181818" points="932.3643,451.2148,922.3643,455.2148,932.3643,459.2148,928.3643,455.2148" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="926.3643" x2="1470.896" y1="455.2148" y2="455.2148"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.9751" x="938.3643" y="450.4727">shareUpdateSuccess</text></g><g class="message" data-participant-1="service" data-participant-2="controller"><polygon fill="#181818" points="536.7617,480.5254,526.7617,484.5254,536.7617,488.5254,532.7617,484.5254" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="530.7617" x2="910.3643" y1="484.5254" y2="484.5254"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.7036" x="542.7617" y="479.7832">successResponse</text></g><g class="message" data-participant-1="controller" data-participant-2="user"><polygon fill="#181818" points="58.1826,509.8359,48.1826,513.8359,58.1826,517.8359,54.1826,513.8359" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="52.1826" x2="514.7617" y1="513.8359" y2="513.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="310.9717" x="64.1826" y="509.0938">200 OK (Share permissions updated successfully)</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="19" x2="1540.1382" y1="522.8359" y2="522.8359"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="149.7354" x="24" y="533.4707">[permission update failed]</text><g class="message" data-participant-1="broker" data-participant-2="service"><polygon fill="#181818" points="932.3643,554.1016,922.3643,558.1016,932.3643,562.1016,928.3643,558.1016" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="926.3643" x2="1470.896" y1="558.1016" y2="558.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.3862" x="938.3643" y="553.3594">shareUpdateFailure</text></g><g class="message" data-participant-1="service" data-participant-2="controller"><polygon fill="#181818" points="536.7617,583.4121,526.7617,587.4121,536.7617,591.4121,532.7617,587.4121" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="530.7617" x2="910.3643" y1="587.4121" y2="587.4121"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.3809" x="542.7617" y="582.6699">errorResponse</text></g><g class="message" data-participant-1="controller" data-participant-2="user"><polygon fill="#181818" points="58.1826,612.7227,48.1826,616.7227,58.1826,620.7227,54.1826,616.7227" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="52.1826" x2="514.7617" y1="616.7227" y2="616.7227"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155.0859" x="64.1826" y="611.9805">500 Internal Server Error</text></g><!--SRC=[dLJ9Rjim4BtpAmOwsO031mLwqQ50wgHjq2seam-Wn552L289aZ9g1FdtSfCzYbCag0_oa9gPzzuiugtN5gexXxO2xc0C1ZFSUjbAmvM7wXSwFTeMDrfvg_k-EBQ7uylkMxGxsMBoTTcUEtv7v_WzVhJwTqdP97FkTM5CBrlkfLRR1sxnctGULGdWnand9hZd3NS8rMMnaeje65FQ8-WTsgHkHQZN48N3Q48qEh25ExW81GRj89qBq0uM5ha8hbxdSDcCeN1Bnc9AEFimItfpSRlv0cjkvBhLmp0gwIMwzUDqs5-Bf_K45kudCrudQCPRBtU14orpac7b_OC7tIKfDJncghTxWpLKX5a5JumTWoF3qeMwo3qqAYPO46ehEF9PvVoNNY-FdAPsicB4vAAfOSTxIJDV_GdDSGkQZS2GXA59ee4pol4Gf3hD159N2fj7PfAqcR8dJJU7zhsYBbPl5OVf1n-Gq2hpoF9_X2C3Ds4-X_g7MW954EW0Ct8umHgqaDt-izMZUJFWR1oMy_IaT8dNNQcVwgGTqhRHeizfzXxSs8R1TTtOaoKf1M4GVbF9Q4i9q3R79rU2KmeURzFZqEXd-rNWmvoPi9iPaSvwSC_hyUxy77v-XSNsP9ypLq6KzFkmpTWxF9K47PSzYhSe-nGyHul_gmojrVPrNU-3hclbqIhUG_pIXhTNCPIX4eosRjfLSaK-ANy1]--></g></svg>